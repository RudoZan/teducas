<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabla de multiplicar colaborativa - Teducas</title>
    <link rel="stylesheet" href="styles.css">
    <script type="module">
        // Cargar Supabase como mÃ³dulo ES6 y exponerlo globalmente
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';
        window.supabaseJs = { createClient };
    </script>
</head>
<body>
    <!-- Modal para ingresar nombre de usuario -->
    <div id="usernameModal" class="modal">
        <div class="modal-content">
            <h2>Â¡Bienvenido al Juego Colaborativo!</h2>
            <p>Ingresa tu nombre para comenzar:</p>
            <input type="text" id="usernameInput" placeholder="Tu nombre" maxlength="20">
            <button id="joinGameBtn">Entrar al Juego</button>
        </div>
    </div>

    <!-- Contenedor principal -->
    <div id="mainContainer" class="hidden">
        <header>
            <h1>ğŸ§® Tabla de multiplicar colaborativa</h1>
            <div class="header-controls">
                <button id="newGameBtn" class="btn-primary">ğŸ”„ Comenzar Nuevo Juego</button>
            </div>
        </header>

        <div class="game-container">
            <!-- Tablero principal con piezas -->
            <div class="board-section">
                <h2 id="boardTitle">Tabla de multiplicar</h2>
                <div class="board-and-pieces">
                    <div id="multiplicationBoard" class="board"></div>
                    <div class="pieces-section">
                        <h3>Piezas disponibles:</h3>
                        <div id="piecesContainer" class="pieces-container"></div>
                    </div>
                </div>
            </div>

            <!-- Lista de usuarios -->
            <aside class="users-section">
                <h2>ğŸ‘¥ Usuarios Conectados</h2>
                <div id="usersList" class="users-list"></div>
            </aside>
        </div>

        <!-- CrÃ©ditos -->
        <div class="credits">
            <p>Desarrollado por Astutosoft 2026</p>
        </div>

        <!-- Modal de countdown -->
        <div id="countdownModal" class="modal hidden">
            <div class="modal-content countdown-modal">
                <div id="countdown" class="countdown-text"></div>
            </div>
        </div>

        <!-- Modal de configuraciÃ³n de juego -->
        <div id="gameConfigModal" class="modal hidden">
            <div class="modal-content">
                <h2>âš™ï¸ Configurar Nuevo Juego</h2>
                <div class="config-section">
                    <label for="tableSize">TamaÃ±o de la tabla:</label>
                    <select id="tableSize" class="config-select">
                        <option value="5">5x5</option>
                        <option value="6">6x6</option>
                        <option value="7">7x7</option>
                        <option value="8">8x8</option>
                        <option value="9">9x9</option>
                        <option value="10" selected>10x10</option>
                        <option value="11">11x11</option>
                        <option value="12">12x12</option>
                        <option value="13">13x13</option>
                        <option value="14">14x14</option>
                        <option value="15">15x15</option>
                    </select>
                </div>
                <div class="config-section">
                    <label for="missingPieces">Piezas faltantes:</label>
                    <input type="number" id="missingPieces" class="config-input" min="10" max="30" value="15">
                    <small>Entre 10 y 30 piezas</small>
                </div>
                <div class="config-actions">
                    <button id="startGameBtn" class="btn-primary">â–¶ï¸ Iniciar Juego</button>
                    <button id="cancelConfigBtn" class="btn-secondary">Cancelar</button>
                </div>
            </div>
        </div>

        <!-- Modal de finalizaciÃ³n -->
        <div id="gameCompleteModal" class="modal hidden">
            <div class="modal-content">
                <h2>Â¡Tablero Completo! ğŸ‰</h2>
                <p>El juego ha finalizado. Â¡Buen trabajo colaborativo!</p>
                <div id="finalScores"></div>
                <button id="restartGameBtn" class="btn-primary">ğŸ”„ Jugar de Nuevo</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
